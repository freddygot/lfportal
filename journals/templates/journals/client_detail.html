<!-- journals/templates/journals/client_detail.html -->
{% extends "base_with_sidebar.html" %}

{% block title %}{{ client.name }}{% endblock %}

{% block content %}
    <h2>{{ client.name }}</h2>
    <p>Email: {{ client.email }}</p>
    <a href="{% url 'client_edit' client.pk %}">Edit</a> | 
    <a href="{% url 'client_delete' client.pk %}">Delete</a>
    <p><a href="{% url 'client_list' %}">Back to list</a></p>

    <div>
        <h2>ORS Progress</h2>
        <img src="data:image/png;base64,{{ graph }}" alt="ORS Progress Graph">
    </div>

    <div>
        <h2>Journal Notes</h2>
        <ul>
            {% for journal in journals %}
                <li>
                    <h3>{{ journal.title }}</h3>
                    <p>{{ journal.content }}</p>
                    <small>{{ journal.created_at }}</small>
                </li>
            {% endfor %}
        </ul>
    </div>

    <div>
        <h2>Appointments</h2>
        <ul>
            {% for appointment in appointments %}
                <li>
                    <h3>{{ appointment.title }}</h3>
                    <p>{{ appointment.date }} {{ appointment.time }}</p>
                    <p>Service: {{ appointment.service.name }}</p>
                </li>
            {% endfor %}
        </ul>
    </div>
{% endblock %}
